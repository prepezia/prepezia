
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's public profile and basic information.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "phoneNumber": {
            "type": "string",
            "description": "The user's verified phone number."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user account was created."
        },
        "emailVerified": {
            "type": "boolean",
            "description": "Whether the user's email has been verified."
        },
        "emailVerifiedAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the email was verified."
        },
        "phoneVerified": {
            "type": "boolean",
            "description": "Whether the user's phone has been verified."
        },
        "phoneVerifiedAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the phone was verified."
        },
        "isAdmin": {
          "type": "boolean",
          "description": "Whether the user has admin privileges."
        },
        "educationalLevel": {
            "type": "string",
            "description": "The user's current educational level.",
            "enum": [
                "Junior High (JHS/BECE)",
                "Senior High (SHS/WASSCE)",
                "Undergraduate",
                "Postgraduate (Masters/PhD)",
                "Professional",
                "Other"
            ]
        },
        "interests": {
            "type": "array",
            "description": "A list of the user's interests, used by the AI to personalize explanations.",
            "items": {
                "type": "string"
            }
        }
      },
      "required": ["name", "email", "createdAt"]
    },
    "UserFeedback": {
      "title": "User Feedback",
      "description": "Represents a bug report or suggestion submitted by a user.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "userName": { "type": "string" },
        "userEmail": { "type": "string" },
        "title": { "type": "string" },
        "description": { "type": "string" },
        "status": { "type": "string", "enum": ["New", "In Progress", "Done"] },
        "adminAction": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "fileUrl": { "type": "string", "format": "uri" }
      },
      "required": ["userId", "title", "description", "status", "createdAt"]
    },
    "LegalDocument": {
      "title": "Legal Document",
      "description": "Stores the content for legal pages like Terms of Use or Privacy Policy.",
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "description": "The full content of the document in Markdown format."
        },
        "lastUpdated": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the last update."
        }
      },
      "required": ["content", "lastUpdated"]
    },
    "RecentNote": {
      "title": "Recent Note",
      "description": "Represents a single set of AI-generated study notes, linked to a user.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The ID of the user who owns this note." },
        "topic": { "type": "string" },
        "level": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "content": { "type": "string" },
        "nextStepsPrompt": { "type": "string" },
        "progress": { "type": "number" },
        "status": { "type": "string", "enum": ["Not Started", "In Progress", "Completed"] },
        "generatedContent": { "$ref": "#/entities/GeneratedContent" },
        "interactionProgress": { "type": "object" }
      },
      "required": ["userId", "topic", "level", "date", "content"]
    },
    "GeneratedContent": {
        "title": "Generated Content",
        "description": "Container for various types of AI-generated content linked to a note or study space.",
        "type": "object",
        "properties": {
            "summary": { "type": "string" },
            "podcast": {
                "type": "object",
                "properties": {
                    "podcastScript": { "type": "string" },
                    "podcastAudioUrl": { "type": "string", "description": "URL to the audio file in Cloud Storage." }
                }
            },
            "infographic": {
                "type": "object",
                "properties": {
                    "imageUrl": { "type": "string", "description": "URL to the image file in Cloud Storage." },
                    "prompt": { "type": "string" }
                }
            },
            "flashcards": {
                "type": "array",
                "items": { "type": "object", "properties": { "front": { "type": "string" }, "back": { "type": "string" } } }
            },
            "quiz": { "type": "array" },
            "deck": { "type": "object" },
            "mindmap": { "type": "object" }
        }
    },
    "Testimonial": {
      "title": "Testimonial",
      "description": "Represents a user testimonial for display on the landing page.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the person giving the testimonial."
        },
        "title": {
          "type": "string",
          "description": "The title or role of the person (e.g., 'WASSCE Candidate')."
        },
        "text": {
          "type": "string",
          "description": "The full text content of the testimonial."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the testimonial was added."
        }
      },
      "required": ["name", "title", "text", "createdAt"]
    },
    "PastQuestion": {
      "title": "Past Question",
      "description": "Represents a single past exam paper file and its metadata.",
      "type": "object",
      "properties": {
        "level": {
          "type": "string",
          "enum": ["BECE", "WASSCE", "University"]
        },
        "subject": { "type": "string", "description": "The course or subject title (e.g., Microeconomics)" },
        "courseCode": { "type": "string", "description": "The specific course code (e.g., Econ 401)" },
        "year": { "type": "string" },
        "university": { "type": "string" },
        "schoolFaculty": { "type": "string" },
        "durationMinutes": { "type": "number", "description": "Time limit for the exam in minutes." },
        "totalQuestions": { "type": "number", "description": "The total number of questions in the paper." },
        "fileName": { "type": "string" },
        "fileUrl": { "type": "string", "format": "uri" },
        "storagePath": { "type": "string" },
        "extractedText": { "type": "string", "description": "The full text content extracted from the file." },
        "uploadedAt": {
            "type": "string",
            "format": "date-time"
        }
      },
      "required": ["level", "subject", "year", "fileName", "fileUrl", "storagePath", "uploadedAt"]
    },
    "CustomUniversity": {
      "title": "Custom University",
      "description": "A university added manually by an admin.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "addedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["name", "addedAt"]
    },
    "GuidedChat": {
        "title": "Guided Learning Chat",
        "description": "Represents a single guided learning conversation session.",
        "type": "object",
        "properties": {
            "userId": { "type": "string", "description": "The ID of the user who owns this chat." },
            "topic": { "type": "string", "description": "The title of the chat session." },
            "createdAt": { "type": "string", "format": "date-time" },
            "progress": { "type": "number", "description": "The completion progress of the chat." },
            "status": { "type": "string", "enum": ["Not Started", "In Progress", "Completed"] },
            "history": {
                "type": "array",
                "description": "The full conversation history.",
                "items": { "type": "object" }
            }
        },
        "required": ["userId", "topic", "createdAt"]
    }
  },
  "auth": {
    "providers": ["Email", "Google", "Phone"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores public user profile information."
    },
    "/users/{userId}/guided_chats/{chatId}": {
        "schema": { "$ref": "#/entities/GuidedChat" },
        "description": "Stores a user's individual guided learning chat sessions."
    },
    "/feedback/{feedbackId}": {
      "schema": { "$ref": "#/entities/UserFeedback" },
      "description": "Stores user bug reports and suggestions."
    },
    "/legal_content/{documentId}": {
      "schema": {
        "$ref": "#/entities/LegalDocument"
      },
      "description": "Stores content for legal pages like 'terms_of_use' and 'privacy_policy'."
    },
    "/notes/{noteId}": {
        "schema": { "$ref": "#/entities/RecentNote" },
        "description": "Top-level collection for all user notes."
    },
    "/testimonials/{testimonialId}": {
      "schema": {
        "$ref": "#/entities/Testimonial"
      },
      "description": "Stores user testimonials for the landing page."
    },
    "/past_questions/{questionId}": {
      "schema": {
        "$ref": "#/entities/PastQuestion"
      },
      "description": "Stores uploaded past exam question papers."
    },
    "/custom_universities/{universityId}": {
      "schema": { "$ref": "#/entities/CustomUniversity" },
      "description": "Stores universities added by administrators."
    }
  }
}
